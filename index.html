<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kafe SipariÅŸ</title>

<style>
body{font-family:Arial,sans-serif;background:#121212;color:#eee;margin:0}
h2,h3{text-align:center}

/* PANEL */
.panel{background:#1e1e1e;padding:12px;display:flex;gap:8px;flex-wrap:wrap}
.panel input{padding:8px;background:#2a2a2a;border:none;color:#fff;border-radius:6px}
.panel button{padding:8px 12px;background:#4caf50;border:none;color:#fff;border-radius:6px}

/* FÄ°LTRE */
.filtre{
  display:flex;
  gap:8px;
  padding:10px;
  justify-content:center;
  flex-wrap:wrap;
}
.filtre input,.filtre button{
  padding:8px;
  border:none;
  border-radius:6px;
}
.filtre button{background:#1976d2;color:#fff}

/* KARTLAR */
.container{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:22px;
  padding:15px;
}
@media(min-width:768px) and (max-width:1024px){
  .container{grid-template-columns:repeat(5,1fr)}
}
@media(max-width:767px){
  .container{grid-template-columns:1fr}
}

.card{background:#1e1e1e;padding:20px;border-radius:14px}
.item{display:flex;justify-content:space-between;margin:10px 0;border-bottom:1px dashed #333}
.item button{background:#333;color:#fff;border:none;border-radius:5px;padding:4px 8px}
.total{margin-top:10px;font-size:16px}

.clear,.saveBtn{
  width:100%;padding:10px;border:none;border-radius:8px;margin-top:8px;color:#fff
}
.clear{background:#c62828}
.saveBtn{background:#1976d2}

/* GÃœNLÃœK */
#gunluk{
  background:#1a1a1a;
  padding:15px;
  margin:15px;
  border-radius:12px;
}
.kayit{display:flex;justify-content:space-between;border-bottom:1px dashed #444;padding:6px 0}
.tarihBaslik{margin-top:14px;font-weight:bold}
.ciro{margin:4px 0 8px 0;color:#4caf50;font-weight:bold}

/* RESET */
#resetGunluk{
  width:100%;
  padding:12px;
  background:#b71c1c;
  color:#fff;
  border:none;
  border-radius:10px;
  margin-top:10px;
}
</style>
</head>

<body>

<h2>Kafe SipariÅŸ</h2>

<div class="panel">
  <input id="urunAdi" placeholder="ÃœrÃ¼n adÄ±">
  <input id="urunFiyat" type="number" placeholder="Fiyat">
  <button onclick="urunEkle()">ÃœrÃ¼n Ekle</button>
</div>

<div class="container" id="container"></div>

<!-- TARÄ°H FÄ°LTRE -->
<div class="filtre">
  <input type="date" id="tarihSec">
  <button onclick="filtrele()">ğŸ” Filtrele</button>
  <button onclick="tumunuGoster()">ğŸ“‹ TÃ¼mÃ¼nÃ¼ GÃ¶ster</button>
</div>

<div id="gunluk">
  <h3>ğŸ“Š Tarihli KayÄ±t & Ciro</h3>
  <div id="gunlukListe"></div>
  <button id="resetGunluk" onclick="gunlukReset()">ğŸ—‘ï¸ BugÃ¼nÃ¼ SÄ±fÄ±rla</button>
</div>

<script>
const masaSayisi=16;

let urunler=JSON.parse(localStorage.getItem("urunler"))||{
  cay:{ad:"Ã‡ay",fiyat:20},
  tost:{ad:"Tost",fiyat:170},
  icecek:{ad:"Ä°Ã§ecek",fiyat:70}
};
let veriler=JSON.parse(localStorage.getItem("veriler"))||{};
let gunluk=JSON.parse(localStorage.getItem("gunluk"))||[];

function today(){
  return new Date().toISOString().split("T")[0];
}

function kaydetLS(){
  localStorage.setItem("urunler",JSON.stringify(urunler));
  localStorage.setItem("veriler",JSON.stringify(veriler));
  localStorage.setItem("gunluk",JSON.stringify(gunluk));
}

function hesapla(m){
  let t=0;
  for(let k in urunler)t+=(veriler[m][k]||0)*urunler[k].fiyat;
  return t;
}

function olustur(){
  let html="";
  for(let m=1;m<=masaSayisi;m++){
    veriler[m]=veriler[m]||{};
    html+=`<div class="card"><h4>Masa ${m}</h4>`;
    for(let k in urunler){
      veriler[m][k]=veriler[m][k]||0;
      html+=`
      <div class="item">
        ${urunler[k].ad}
        <div>
          <button onclick="degistir(${m},'${k}',-1)">-</button>
          ${veriler[m][k]}
          <button onclick="degistir(${m},'${k}',1)">+</button>
        </div>
      </div>`;
    }
    html+=`
    <div class="total">Toplam: ${hesapla(m)} TL</div>
    <button class="saveBtn" onclick="gunlukKaydet(${m})">ğŸ’¾ Kaydet</button>
    <button class="clear" onclick="temizle(${m})">Temizle</button>
    </div>`;
  }
  container.innerHTML=html;
  gunlukGoster();
  kaydetLS();
}

function degistir(m,k,d){
  veriler[m][k]=Math.max(0,(veriler[m][k]||0)+d);
  olustur();
}

function temizle(m){
  for(let k in urunler)veriler[m][k]=0;
  olustur();
}

/* KAYIT */
function gunlukKaydet(m){
  let tutar=hesapla(m);
  if(tutar===0)return alert("Tutar 0");
  gunluk.push({
    tarih:today(),
    masa:m,
    tutar,
    saat:new Date().toLocaleTimeString()
  });
  temizle(m);
}

/* GÃ–STER / FÄ°LTRE */
function gunlukGoster(liste=gunluk){
  gunlukListe.innerHTML="";
  let gruplu={};

  liste.forEach(k=>{
    gruplu[k.tarih]=gruplu[k.tarih]||{toplam:0,kayitlar:[]};
    gruplu[k.tarih].toplam+=k.tutar;
    gruplu[k.tarih].kayitlar.push(k);
  });

  Object.keys(gruplu).sort().reverse().forEach(t=>{
    gunlukListe.innerHTML+=`
      <div class="tarihBaslik">ğŸ“… ${t}</div>
      <div class="ciro">Toplam Ciro: ${gruplu[t].toplam} TL</div>
    `;
    gruplu[t].kayitlar.forEach(k=>{
      gunlukListe.innerHTML+=
      `<div class="kayit">Masa ${k.masa} <b>${k.tutar} TL</b> (${k.saat})</div>`;
    });
  });
}

function filtrele(){
  let t=tarihSec.value;
  if(!t)return alert("Tarih seÃ§");
  gunlukGoster(gunluk.filter(k=>k.tarih===t));
}

function tumunuGoster(){
  gunlukGoster(gunluk);
}

/* RESET */
function gunlukReset(){
  if(!confirm("BugÃ¼nÃ¼n kayÄ±tlarÄ± silinsin mi?"))return;
  gunluk=gunluk.filter(k=>k.tarih!==today());
  kaydetLS();
  gunlukGoster();
}

function urunEkle(){
  let ad=urunAdi.value.trim();
  let fiyat=+urunFiyat.value;
  if(!ad||!fiyat)return;
  let key=ad.toLowerCase().replace(/\s+/g,"");
  urunler[key]={ad,fiyat};
  for(let m=1;m<=masaSayisi;m++)veriler[m][key]=0;
  urunAdi.value=urunFiyat.value="";
  olustur();
}

olustur();
</script>

</body>
</html>
